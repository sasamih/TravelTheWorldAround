<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<title>Wellcome</title>
	<link href="#{request.contextPath}/styles.css" rel="stylesheet"
		type="text/css" />
</h:head>
<h:body onload="#{putopisBean.topTenTravels()}">
	<p:panelGrid>
		<p:row>
			<p:column>

			</p:column>
			<p:column>
				<h:outputText value="#{korisnikBean.porukaPrijava}"
					style="color:red"></h:outputText>
				<h:form>
					<h:panelGrid columns="3">
						<h:outputText value="Korisnicko ime: "></h:outputText>
						<h:inputText value="#{korisnikBean.prijavaKorisnickoIme}"
							id="korisnickoIme" required="true"
							requiredMessage="Popunite polje"></h:inputText>
						<h:message for="korisnickoIme" style="color:red"></h:message>
						<h:outputText value="Lozinka: "></h:outputText>
						<h:inputSecret value="#{korisnikBean.prijavaLozinka}" id="lozinka"
							required="true" requiredMessage="Popunite polje"></h:inputSecret>
						<h:message for="lozinka" style="color:red"></h:message>
						<h:outputText></h:outputText>
						<h:commandButton value="Prijava" action="#{korisnikBean.prijavi}">
							<f:actionListener binding="#{putopisBean.prijava()}"></f:actionListener>
						</h:commandButton>
					</h:panelGrid>
				</h:form>
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<dir class="feed">
					<p:feedReader value="http://www.travelizmo.com/index.rdf"
						var="feed">
						<h:outputText value="#{feed.title}"
							style="font-weight: bold;display:block" />
						<h:outputText value="#{feed.description.value}" escape="false" />
						<p:separator />
					</p:feedReader>
				</dir>
			</p:column>
			<p:column colspan="2">

			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<a class="twitter-timeline" href="https://twitter.com/klub_putnika"
					data-widget-id="712359835208175616">Tweets by @klub_putnika</a>
				<script>
					!function(d, s, id) {
						var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/
								.test(d.location) ? 'http' : 'https';
						if (!d.getElementById(id)) {
							js = d.createElement(s);
							js.id = id;
							js.src = p + "://platform.twitter.com/widgets.js";
							fjs.parentNode.insertBefore(js, fjs);
						}
					}(document, "script", "twitter-wjs");
				</script>

			</p:column>
			<p:column>

				<h:form>
					<h:outputText value="#{korisnikBean.porukaRegistracija}"
						style="color:red"></h:outputText>
					<h:panelGrid columns="3">
						<h:outputText value="Ime:"></h:outputText>
						<h:inputText id="ime" value="#{korisnikBean.korisnik.ime}"
							required="true" requiredMessage="Popunite polje."></h:inputText>
						<h:message for="ime" style="color:red"></h:message>

						<h:outputText value="Prezime:"></h:outputText>
						<h:inputText id="prezime" value="#{korisnikBean.korisnik.prezime}"
							required="true" requiredMessage="Popunite polje."></h:inputText>
						<h:message for="prezime" style="color:red"></h:message>

						<h:outputText value="Datum rodjenja:"></h:outputText>
						<h:inputText id="datumRodjenja" required="true"
							value="#{korisnikBean.korisnik.datumRodjenja}"
							requiredMessage="Popunite polje." />
						<h:message for="datumRodjenja" style="color:red"></h:message>

						<h:outputText value="Kratka biografija:"></h:outputText>
						<h:inputText id="kratkaBiografija" required="true"
							value="#{korisnikBean.korisnik.kratkaBiografija}"
							requiredMessage="Popunite polje." />
						<h:message for="kratkaBiografija" style="color:red"></h:message>

						<h:outputText value="E-mail:"></h:outputText>
						<h:inputText id="email" value="#{korisnikBean.korisnik.eMail}"
							required="true" requiredMessage="Popunite polje."></h:inputText>
						<h:message for="email" style="color:red"></h:message>

						<h:outputText value="Korisnicko ime:"></h:outputText>
						<h:inputText id="kIme" required="true"
							value="#{korisnikBean.korisnik.korisnickoIme}"
							requiredMessage="Popunite polje." />
						<h:message for="kIme" style="color:red"></h:message>

						<h:outputText value="Lozinka:"></h:outputText>
						<h:inputSecret id="lozinka" required="true"
							value="#{korisnikBean.korisnik.lozinka}"
							requiredMessage="Popunite polje.">
							<p:ajax event="keyup" listener="#{korisnikBean.sacuvajLozinku}"/>
						</h:inputSecret>
						<h:message for="lozinka" style="color:red"></h:message>

						<h:outputText value="Ponovljena lozinka"></h:outputText>
						<h:inputSecret id="pon_lozinka"
							value="#{korisnikBean.ponovljenaLozinka}">
							<p:ajax event="keyup" update="poklapanje" listener="#{korisnikBean.provjeriLozinke}"/>
						</h:inputSecret>
						<h:outputText id="poklapanje"
							value="#{korisnikBean.lozinkeNejednake}"></h:outputText>

						<h:outputText value="Korisnicka grupa:"></h:outputText>
						<h:selectOneMenu value="#{korisnikBean.korisnik.korisnickaGrupa}">
							<f:selectItem itemLabel="administrator" itemValue="administrator"></f:selectItem>
							<f:selectItem itemLabel="korisnik" itemValue="korisnik"></f:selectItem>
						</h:selectOneMenu>
						<h:message></h:message>

						<h:commandButton value="Sign up" action="#{korisnikBean.insert}"></h:commandButton>

					</h:panelGrid>
				</h:form>
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<h:form>
					<h:panelGrid columns="2">
						<h:outputText value="Unesite naslov ili kljucnu rijec:"></h:outputText>
						<h:inputText value="#{putopisBean.tekstPretrage}">
							<p:ajax event="keyup" update="lista listaProsjek"
								listener="#{putopisBean.pretraziGost}" />
						</h:inputText>

					</h:panelGrid>
					<h:panelGrid columns="2">
					<h:dataTable id="lista" cellpadding="10"
						value="#{putopisBean.putopisi}" var="k">
						<h:column>
							<f:facet name="header">Naslov putopisa</f:facet>
									<h:commandLink value="#{k.nazivPutopisa}" action="#{putopisBean.putopisProcitaj(k)}"></h:commandLink>
						</h:column>
					</h:dataTable>
					
					<h:dataTable id="listaProsjek" cellspacing="30" value="#{putopisBean.putopisi}" var="pp">
						<h:column>
							<f:facet name="header">Prosjecna ocjena</f:facet>
							<h:outputText value="#{pp.prosjecnaOcjena}"></h:outputText>
						</h:column>
					</h:dataTable>
					</h:panelGrid>
				</h:form>
			</p:column>
			<p:column>
				<h:dataTable value="#{putopisBean.topTen}" var="top">
					<p:column>
						<h:outputText value="#{top.nazivPutopisa}"></h:outputText>
					</p:column>
					<p:column>
						<h:outputText value="#{top.prosjecnaOcjena}"></h:outputText>
					</p:column>
				</h:dataTable>
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				
			</p:column>
		</p:row>

	</p:panelGrid>
</h:body>
</html>